#+Title: Comandos do android

* Variáveis de ambiente[ln:cmdline_variables]
** Variável do local de Instlação do SDK 
   ANDROID_HOME está depreciado em favor de ANDROID_SDK_ROOT
   Ambas devem apontar pro local onde o sdk está instalado

   #+NAME export env vars
   #+BEGIN_SRC sh :results output :exports both
   export ANDROID_SDK_ROOT=/home/wagner/PROGSATIVOS/androidSdk && \
   export PATH=$PATH:$ANDROID_SDK_ROOT/platform-tools:$ANDROID_SDK_ROOT/emulator:$ANDROID_SDK_ROOT/tools
   echo $ANDROID_SDK_ROOT
   #+END_SRC

   #+RESULTS:
   : /home/wagner/PROGSATIVOS/androidSdk
   
** Informações sobre o emulador do android
   Por padrão o emulador salva suas configuraçoes em $HOME/.android/
   Por exemplo, no momento o conteúdo desse diretório na minha máquina é...
   #+BEGIN_SRC sh
   ls $HOME/.android/
   #+END_SRC


  
Pra obter informações do seu ambiente relativo ao emulador, digite o
seguinte comando
#+NAME:emulator -help-environment
#+BEGIN_SRC sh :results output
  emulator -help-environment
#+END_SRC

#+RESULTS: emulator -help-environment
#+begin_example

  The Android emulator looks at various environment variables when it starts:

  If ANDROID_LOG_TAGS is defined, it will be used as in '-logcat <tags>'.

  If 'http_proxy' is defined, it will be used as in '-http-proxy <proxy>'.

  If ANDROID_VERBOSE is defined, it can contain a comma-separated list of
  verbose items. for example:

      ANDROID_VERBOSE=socket,radio

  is equivalent to using the '-verbose -verbose-socket -verbose-radio'
  options together. unsupported items will be ignored.

  If ANDROID_LOG_TAGS is defined, it will be used as in '-logcat <tags>'.

  If ANDROID_EMULATOR_HOME is defined, it replaces the path of the '$HOME/.android'
  directory which contains the emulator config data (key stores, etc.).

  If ANDROID_SDK_ROOT is defined, it indicates the path of the SDK
  installation directory.

#+end_example



   Uma alternativa interessante é vc definir essas variáveis de ambiente
   em um script e rodar ele na inicialização do seu sistema ou nas
   ocasiões em que vc for trabalhar com o android. É bom pra automatizar
   o processo nas ocasiões que vc precisar.

   Exemplo de script
   #+INCLUDE: "scripts/environment_setup.sh" sh


* Criar nosso primeiro projeto
  Pra obter uma ajuda do comando android create project rode o
  seguinte escript

  Pra criar um projeto utilize esse comando...
  

  #+NAME  create project
  #+BEGIN_SRC sh :exports both  
  projectName=projhello
  projectPath=./projetos/$projectName
  projectMainActivity=MainActivity
  projectPackage=br.com.androidproject.project
  android \
      create project --target 1 \
      --name $projectName \
      --path $projectPath \
      --activity $projectMainActivity \
      --package $projectPackage
  #+END_SRC



  Mas o que que é esse --targets? Pra ver dê esse comando abaixo

  #+NAME: list targets
  #+BEGIN_SRC sh
  #!/bin/bash
  android list targets
  #+END_SRC

  #+NAME: list targets
  #+BEGIN_SRC shell :exports both
  ./list_targets.sh
  #+END_SRC


* emulando o projeto

** usando emulator
   https://developer.android.com/studio/run/emulator-commandline
   #+NAME: emulator -list-avds
   #+BEGIN_SRC sh
   source ./scripts/environment_setup.sh
   emulator -list-avds
   #+END_SRC

   
Esses emuladores sao os que eu tenho instalado na minha
máquina. Instalá-los já é outra história que não vai dar pra colocar
aqui agora. Mas pra ficar simples, você pode instalar o android studio
e, pelo menos pra isso, vc usa ele. Pergunte pro seu professor na sala
que ele te explica.

#+NAME emulator @avd_name
#+BEGIN_SRC sh
source ./scripts/environment_setup.sh
emulator @Nexus_4_API_24 &
#+END_SRC



quando o emulador inicia a gente tem esse resultado...
[[file:imgs/img1.png]]
[[file:imgs/img1.png]]
[[file:imgs/img1.png]]




** usando adb
  Pra emular a gente tem, primeiro, que ver quais devices temos pra
  emular...
  Pra entender o comando adb você pode consultar
  https://developer.android.com/studio/command-line/adb 

  #+NAME: adb devices
  #+BEGIN_SRC sh
  source ./scripts/environment_setup.sh
  adb devices
  #+END_SRC

  Com o meu emulador ligado, o adb devices retorna o seguinte...

  | List          | of     | devices | attached |
  | emulator-5554 | device |         |          |
  |               |        |         |          |

  Sem nenhum emulador ligado ou dispositivo físico detectado, o adb
  não retorna nada.

  #+RESULTS: list avds
  : List of devices attached

  se tiver em branco é porque nao tem nenhum dispositivo pra vc rodar
  o seu projeto


* Notificações
  https://developer.android.com/guide/topics/ui/notifiers/notifications?hl=pt-br
  
  

* Refs
[ln:cmdline_variables]  https://developer.android.com/studio/command-line/variables
